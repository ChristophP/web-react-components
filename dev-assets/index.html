<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/document-register-element/1.5.0/document-register-element.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.8/react-with-addons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.8/react-dom.js"></script>

  <!-- compiled JS -->
  <script src="/bundle.js"></script>
</head>
<body>
  <h1>Web React Components</h1>

  <!-- render the custom element -->
  <my-component
    id="myComponent"
    name="Peter"
    age="45"
    fruits='["apple","orange","banana"]'
    onClickButton="console.log('attribute callback `onclickbutton` triggered')"
  >
    I'm a <em>native</em> child
  </my-component>

  <script>
    // create react component
    const h = React.createElement;
    const style = { backgroundColor: '#eee', padding: '1em' };
    const MyComponent = ({
      name,
      children,
      age = 'unknown',
      fruits = [],
      onClickButton = Function.prototype,
      fooBar = Function.prototype,
    } = {}) =>
      h('div', null,
        h('h1', { onMouseOver: () => fooBar('baz') }, name),
        h('button', { onClick: () => onClickButton({ num: 1 }) }, 'Click me!'),
        h('p', null, 'Age: ' + age),
        children && h('div', { style }, children),
        h('ul', null, fruits.map((fruit, key) =>
          h('li', { key }, fruit))
        ),
      );

    // register react component as custom element
    WebReactComponents.register(MyComponent, 'my-component', {
      attributes: ['name', 'age', 'fruits'],
      events: ['onClickButton', 'fooBar'],
    });

    // add some DOM Level 3 event handlers
    const myComponent = document.getElementById('myComponent');
    myComponent.addEventListener('onClickButton', (e) => {
      console.log('Event `onClickButton` triggered', e)
    });
    myComponent.addEventListener('fooBar', (e) => {
      console.log('Event `fooBar` triggered', e)
    });
  </script>
</body>
